# idleinfinity

## ゲームの遊び方

このゲームは、放置系（アイドル）ゲームです。

### ゲームの目的
1.  **第1臨界点:** まずは、手持ちのキャッシュを **2^31 - 1 (約21.4億)** まで増やし、「第1臨界点」を達成することを目指します。
2.  **プレステージとさらなる高み:** 第1臨界点を達成するとゲームをリセットすることができ、**プレステージポイント**を獲得できます。（将来的に、このポイントを使用して様々な強化が可能になる予定です。）リセット後は、より効率的にキャッシュを増やし、さらなる高みを目指すことになります。究極の目標はキャッシュ `2^32` ですが、まずは第1臨界点からの周回が目標となります。

### ゲームの開始
- ゲームはキャッシュ0、Generator1を1つ所持した状態からスタートします。Generator1が毎秒キャッシュを生み出し、これを元手に他のジェネレーターを増やしていきます。

### キャッシュの増やし方
- **Generator1** は、唯一直接キャッシュを生み出すジェネレーターです。所有している Generator1 の数が多いほど、毎秒得られるキャッシュが増加します。

### Generator の役割
- **Generator2** から **Generator9** までの上位ジェネレーターは、直接キャッシュを生み出しません。
- 代わりに、各上位ジェネレーター (例: GeneratorX) は、1つ下位のジェネレーター (GeneratorX-1) を毎秒自動的に生産します。
  - 例: Generator2 は Generator1 を生産し、Generator3 は Generator2 を生産します。
- この連鎖により、最上位のジェネレーターを強化することで、下位のジェネレーターが指数関数的に増えていき、最終的に Generator1 の数が大幅に増加し、キャッシュ獲得量が飛躍的に向上します。

### Generator の購入とコスト
- 各ジェネレーターは、対応する購入ボタンからキャッシュを消費して購入（レベルアップ）できます。
- ジェネレーターを1つ購入（レベルアップ）するたびに、そのジェネレーターの次回購入コストが増加します。計画的に購入を進めましょう。

### 第1臨界点達成とリセット
- キャッシュが `2^31 - 1` に達すると、「First Critical Point Reached!」という英語のメッセージと共に「Reset for +1 Prestige Point」ボタンが表示されます。
- このボタンをクリックすると、以下のようになります:
    - プレステージポイントが1加算されます。
    - キャッシュは0に、全てのジェネレーターのレベル（購入数・自動生産数）は0に、各ジェネレーターのコストは初期状態にリセットされます。**ただし、Generator1は初期状態でレベル1（購入数1、総数1）となり、そのコストも1回購入後の値に設定されます。**
    - 購入回数の選択状態はリセットされず、維持されます。
- リセット後、プレステージポイントを元に（将来的には）強化された状態で、再びキャッシュ集めを開始します。

## 操作方法

ゲームの操作は非常にシンプルです。

### オプション設定
- 画面右上に表示される「⚙️」（歯車）アイコンのボタンをクリックすると、オプション設定パネルが画面右端からスライドして表示されます。
- パネルが表示されると、右上のボタンアイコンは「✖️」（バツ）に変わります。この「✖️」ボタンを再度クリックすると、オプションパネルは右端にスライドして格納され、ボタンアイコンも元の「⚙️」に戻ります。
- **数字表記方法の選択:**
    - 設定パネル内で、ゲーム内に表示される数値の表記方法を選択できます。選択肢は以下の通りです。
        - **Standard (デフォルト):**
            - 10億 (1e9) 未満の数値: 3桁ごとのカンマ区切りで表示されます。(例: `1,234,567`)
            - 10億 (1e9) 以上 1兆 (1e12) 未満: `B` を用いた短縮表記。有効数字3桁を意識した表示になります。(例: `1.23B`, `12.3B`, `123B`)
            - 1兆 (1e12) 以上 1千兆 (1e15) 未満: `T` を用いた同様の短縮表記。
            - 1千兆 (1e15) 以上 1京 (1e18) 未満: `Qa` を用いた同様の短縮表記。
            - 1京 (1e18) 以上: `e` を用いた科学的表記で表示されます。(例: `1.23e18`)
        - **Hexadecimal (16進数):**
            - 数値が16進数（小文字 `a-f` を使用、プレフィックス `0x` なし）で表示され、読みやすさのため4桁ごとに半角スペースで区切られます。(例: `4996 02d2`)
        - **Scientific (科学的表記):**
            - 全ての数値が `e` を用いた科学的表記（小数点以下2桁）で表示されます。(例: `1.23e7`, `4.56e12`)
    - 選択した表記方法は、キャッシュ、コスト、ジェネレーターのレベル（購入数Xと自動生産数Y）など、ゲーム内の全ての数値表示に適用されます。

### 購入回数の選択
- 画面上部にある「Buy Amount:」セレクターで、一度に購入するジェネレーターの数を選択できます。
- 選択肢は「1x」「5x」「10x」「100x」「MAX」です。デフォルトは「1x」です。選択されているオプションはハイライト表示（青色の背景）されます。
- 「MAX」を選択すると、現在の所持キャッシュで購入可能な最大数を一度に購入しようとします。
- 購入回数を変更すると、各ジェネレーターの購入ボタンに表示される「購入予定数」と「合計コスト」が即座に更新されます。
- ゲームをリセット（プレステージ）しても、ここで選択した購入回数は維持されます。

### 画面の見方
- **キャッシュ表示:** 画面上部に現在の所持キャッシュが、オプションで選択された書式で表示されます。
- **プレステージポイント表示:** 初めてリセットしてプレステージポイントを1以上獲得すると、キャッシュ表示の隣に、現在所持しているプレステージポイントが、オプションで選択された書式で表示されるようになります。(例: `| Prestige Points: 1`) これ以降は常に表示されます。
- **リセットエリア (条件付き表示):**
    - 通常時は表示されていません。
    - 第1臨界点を達成すると、キャッシュ表示の下、ジェネレーター情報の上に専用エリアがスライド表示されます。
    - このエリアには、達成メッセージ（英語で "First Critical Point Reached!"）と、「Reset for +1 Prestige Point」ボタンが表示されます。
- **ジェネレーター情報と購入ボタン:**
    - ゲーム開始時は Generator1 のブロックのみが表示（見える状態に）されます。他のジェネレーターブロック（Generator2～9）もレイアウト上のスペースは確保されていますが、最初は見えない状態になっています。
    - GeneratorX の総レベル（購入数＋自動生産数）が5以上になると、次の Generator(X+1) のブロックがその場所で見えるようになります。**この際、他の表示されているブロックの位置が動くことはありません。**
    - 各ジェネレーター（Generator1 ～ Generator9）の情報と購入ボタンは、ひとまとまりのブロックとして表示されます。
    - 画面の幅が十分に広い場合、これらのブロックは自動的に複数列（例: 2列や3列）で表示されます。画面幅が狭い場合は1列で表示されます。
    - 各ブロックの構成は以下の通りです:
        - **左側（情報表示エリア）:**
            - **1行目:** ジェネレーター名 (例: `Generator1`)
            - **2行目:** 現在のレベル。表示形式は以下の通りです。
                - 自動生産数（Y）が0の場合: `lv X` (例: `lv 2` や `lv 1,200`)
                - 自動生産数（Y）が1以上の場合: `lv X + Y` (例: `lv 2 + 3` や `lv 1,200 + 3,450`)
                - `X`（購入数）と `Y`（自動生産数）の数値も、オプションで選択された書式で表示されます。
                - このジェネレーターの実際の総数は `X + Y` となります。
        - **右側（購入ボタン）:**
            - **1行目:** `Buy X` (X は購入予定数。数値はオプション書式適用) - 通常の文字色。
            - **2行目 (購入可能までの時間):** 購入に必要な推定時間を表示。文字色はグレースケール。
                - 購入可能な場合: この行は空白になります。
                - Generator1による収入がない場合: "No income" と表示。
                - 59秒以内: `XXs` (例: `35s`)。
                - 999年以上: "way too much" と表示。
                - その他: `YYYy DDd HH:MM:SS` 形式 (年・日は0の場合表示されません)。
            - **3行目:** `Cost: Y` (Y は合計コスト。数値はオプション書式適用) - 通常の文字色。
            - **ボタンの見た目:**
                - 購入可能な場合（表示された合計コストが所持キャッシュ以下かつ購入予定数が1以上）：ボタンは明るく表示されます。カーソルを合わせるとさらに見た目が変化します。
                - 購入不可能な場合：ボタンは暗めに表示され、カーソルを合わせても見た目はほぼ変わりません。
            - **(注記) MAX購入選択時の表示について:** 「MAX」を選択していて購入不可の場合、ボタンは「Buy 1」と単体コストを表示しますが、購入はできません。

### Generator の購入
- 購入したいジェネレーターのボタンをクリックします。
- ボタンに表示されている合計コストが現在の所持キャッシュ以下であれば、表示されている購入予定数だけジェネレーターがまとめて購入（レベルアップ）されます。
- キャッシュが合計コスト分減少し、ジェネレーターの次回購入コストが更新されます。
- 所持キャッシュが足りない場合や購入予定数が0の場合は、何も起こりません。
