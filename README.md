# idleinfinity

Google Julesで作成しました。[こちら](https://rrrrr-euaeu.github.io/idleinfinity/)から遊べます。

## ゲームの遊び方

このゲームは、放置系（アイドル）ゲームです。

### ゲームの目的
1.  **第1臨界点:** まずは、手持ちのキャッシュを **2^31 - 1 (約21.4億)** まで増やし、「第1臨界点」を達成することを目指します。
2.  **プレステージとさらなる高み:** 第1臨界点を達成するとゲームをリセットすることができ、**プレステージポイント**を獲得できます。（将来的に、このポイントを使用して様々な強化が可能になる予定です。）リセット後は、より効率的にキャッシュを増やし、さらなる高みを目指すことになります。究極の目標はキャッシュ `2^32` ですが、まずは第1臨界点からの周回が目標となります。

### ゲームの開始
- ゲームは **キャッシュ0**、**Generator1を1つ所持** した状態からスタートします。

### 基本的なゲームフロー
1. ゲームが始まると、最初に所持している**Generator1**が自動的にキャッシュを生み出し始めます。
2. 貯まったキャッシュを使って、まずは**Generator1の数を増やし**、キャッシュの生産スピードを上げましょう。
3. ある程度キャッシュが貯まると、**Generator2, Generator3...といったより上位のジェネレーター**の購入がアンロックされます（アンロック条件は後述）。
4. 上位のジェネレーターは、それより一つ下のレベルのジェネレーターを自動的に生産します。例えば、Generator2はGenerator1を、Generator3はGenerator2を生産します。この連鎖により、最終的にGenerator1の数が飛躍的に増え、キャッシュ獲得が加速します。
5. このようにジェネレーターを増やし、強化しながら、最初の大きな目標である「**第1臨界点**」（キャッシュ約21.4億）を目指します。
6. 第1臨界点に到達すると、ゲームを「**プレステージリセット**」することができ、さらなる成長を促す特典（プレステージポイント、リセットブースト）を得て、新たな気持ちでゲームを再開できます。

### 画面の見方
ゲームの画面構成と各要素の機能は以下の通りです。

- **オプションボタンと設定パネル (画面右上):**
    - 画面右上に「⚙️」（歯車）アイコンのボタンが表示されます。これをクリックすると、オプション設定パネルが画面右端からスライドして表示されます。
    - パネルが表示されると、ボタンアイコンは「✖️」（バツ）に変わります。この「✖️」ボタンを再度クリックすると、オプションパネルは格納され、ボタンアイコンも元の「⚙️」に戻ります。
    - **数字表記方法の選択:** オプションパネル内で、以下の数値表示形式を選択できます。ゲーム内のすべての数値（キャッシュ、コスト、ブースト率、収入など。ただしジェネレーターレベルは常に整数表示）の表示方法に影響します。
        - **Standard (標準形式):**
            - 絶対値が100未満の数値: 有効数字を考慮し、値の大きさに応じて小数点以下が動的に調整され、不要な末尾のゼロは省略されます (例: `0`, `7`, `1.23`, `-12.3`, `0.123`, `-0.0123`)。
            - 絶対値が100以上10億未満の数値: カンマ区切りの整数として表示されます (例: `346`, `-1,234,567`)。
                - 絶対値が10億以上の数値: "B" (10億), "T" (兆), "Qa" (千兆) といった単位や、さらに大きな数値の場合は指数表記 (例: `1.23e18`) が用いられます。この際、接尾辞が付く数値の小数点以下について、末尾の不要なゼロは省略されます。例えば、`1.00B` は `1B` と表示され、`1.20T` は `1.2T` と表示されます。有効な小数部分がある場合はそのまま表示されます (例: `1.23Qa`)。
        - **Scientific (指数表記):**
            - 数値の絶対値が10未満の場合: Standard表記と同様のルールで表示されます (例: `0`, `7`, `1.23`, `-0.456`, `0.0123`)。
            - 数値の絶対値が10以上の場合: 仮数部を小数点以下2桁にした指数形式で表示されます (例: `1.23e1`, `-4.56e2`, `1.00e10`)。指数部の `e+` は `e` に置換されます。
        - **Hexadecimal (16進数表記):**
            - 数値の整数部分は16進数に変換され、読みやすさのため4桁ごとにスペースが挿入されます (例: `0`, `ff`, `1 234a bcd`)。
            - 数値の絶対値が1000未満で、かつ小数部分が無視できないほど大きい場合 (約1e-7以上)、小数点 (`.`) に続けて、小数部分も16進数で小数点以下最大3桁まで表示されます。この際、末尾の不要なゼロは省略されます (例: `c.8`, `a.1f`, `0.1c9`)。
            - 数値の絶対値が1000以上の場合、または元の数値が実質的に整数の場合は、整数部分のみが16進数で表示されます。

- **メイン情報パネル (画面上部中央):** ゲームタイトルの下には、主要な情報を含むカード形式のパネル (`.info-panel-card`) が表示されます。このパネルには以下の要素が上から順に表示されます:
    - **全体ブースト表示 (`#total-boost-formula-display`):** パネルの最上部に表示され、現在の総合的なキャッシュ生産ブースト倍率が掛け算の形で表示されます。各ジェネレーターのブースト率およびリセットブースト率はそれぞれのテーマカラー（リセットブーストはグレー、所持ポイント0の場合はリセットブースト自体が非表示）で、オプション設定で選択した書式に従って表示されます。(例: <span style="color: #E63946; font-weight: bold;">1.23</span> × <span style="color: #F4A261; font-weight: bold;">1.10</span> × ... × <span style="color: grey; font-weight: bold;">2.0</span>)。また、この表示エリアの2行目には、現在の1秒あたりの収入 (Income: XXX /s) が表示されます。
    - **統計情報 (`#stats`):** 全体ブースト表示の下に、現在の所持キャッシュ（文字サイズが少し大きく強調表示されます）と、プレステージポイントを1以上所持している場合にはプレステージポイント数（例: `| Prestige Points: YYY`）が表示されます。これらの数値の書式はオプション設定に従います。

- **リセットエリア (`#reset-container`):** キャッシュが「第1臨界点」の目標値 (約21.4億) に達すると、メイン情報パネルのすぐ下にこのエリアが表示され、プレステージリセットが可能になります。ここには目標達成メッセージとリセット実行ボタンが配置されます。

- **購入回数選択 (`#buy-amount-selector`):** リセットエリア（リセットエリアが表示されていない場合はメイン情報パネル）のすぐ下に、独立したカードスタイルのコントロールとして配置されています。ここでジェネレーターのまとめ買いの数量（1x, 5x, 10x, 100x, MAX）を選択できます。この選択はすべてのジェネレーター購入に影響します。

- **ジェネレーター情報と購入ボタン群 (`#actions`):**
    - ゲームの主要な操作エリアで、複数のジェネレーター情報と購入ボタンが縦に並んで表示されます。画面幅が広い場合は、複数列で表示されることもあります。
    - ジェネレーターは最初はGenerator1のみ表示され、その直下のジェネレーターの総数が `gameSettings.generatorUnlockThreshold` (デフォルト値: 5) に達するごとに、次の上位ジェネレーターがアンロックされて表示されるようになります（詳細は「ジェネレーターシステム」セクションの「アンロック条件」を参照）。
    - 各ジェネレーターブロックの構成は以下の通りです:
        - **左側（情報表示エリア）:**
            - **1行目:** ジェネレーター名 (例: `Generator1`, `Generator2` など)。
            - **2行目:** 現在のレベルを表示します。純粋な購入数と、上位ジェネレーターによって自動生産された数を分けて表示します (例: `lv 10 + 5` は、10回購入し、追加で5つ自動生産されたことを意味します。自動生産分がない場合は `lv 10` のように表示)。
        - **右側（購入ボタンエリア）:**
            - 購入ボタンには3行の情報が表示されます:
                1. **購入アクションと数:** 「Buy (選択した購入数)」 (例: `Buy 1`, `Buy MAX`)。
                2. **次に購入可能になるまでの時間 (Time to Buy):** コストに対してキャッシュが不足している場合、現在の収入で何秒待てば購入可能になるかの目安時間 (例: `10s`, `01:23:45`, `3y 120d 00:00:00`)。キャッシュが足りている場合はこの行は空欄になります。キャッシュ収入がない場合は「No income」と表示されます。
                3. **コスト:** 「Cost: (必要キャッシュ額)」。
            - 購入ボタンは、表示されている数のジェネレーターを購入するのに十分なキャッシュがある場合に明るい色（各ジェネレーターのテーマカラー）で表示され、クリック可能であることを示します。キャッシュが不足している場合は暗めの色で表示されます。
    - **テーマカラーの適用:** 各ジェネレーターには固有のテーマカラーが設定されています。この色は、上記の通り購入可能なジェネレーターの購入ボタンの背景色や、メイン情報パネルの全体ブースト表示内の各ジェネレーターのブースト率の値に適用され、視覚的な区別を助けます。

## ゲームシステムの詳細

### ジェネレーターシステム
各ジェネレーターはゲーム進行において異なる役割を果たします。

- **Generator1:** 唯一直接キャッシュを生み出すジェネレーターです。所持しているGenerator1の数が多いほど、基本的なキャッシュ生産量が増加します。この基本生産量が、後述の各種ブーストによって増幅され、最終的なキャッシュ収入となります。
- **Generator2 から Generator9:** これらの上位ジェネレーターは直接キャッシュを生み出しません。代わりに、各上位ジェネレーター (例: GeneratorX) は、1つ下位のジェネレーター (GeneratorX-1) を毎秒自動的に生産します。
  - 例: Generator2 は Generator1 を生産し、Generator3 は Generator2 を生産します。
  - この連鎖により、最上位のジェネレーターを強化することで、下位のジェネレーターが指数関数的に増えていき、最終的に Generator1 の数が大幅に増加し、キャッシュ獲得の基盤を強化します。
- **購入とコスト:** 各ジェネレーターは、対応する購入ボタンからキャッシュを消費して購入（レベルアップ）できます。ジェネレーターを1つ購入（レベルアップ）するたびに、そのジェネレーターの次回購入コストが増加します。
- **アンロック条件:** 上位のジェネレーター (G2～G9) は、その直下のジェネレーターの総数が `gameSettings.generatorUnlockThreshold` (デフォルト値: 5) に達すると購入可能になります。

### ブーストシステム
ゲームのキャッシュ生産量を飛躍的に増加させるための主要なメカニズムとして、2種類のブーストが存在します。これらは乗算で影響しあい、最終的なキャッシュ生産量を決定します。

1.  **ジェネレーター別ブースト (`boostRate`):**
    - 各ジェネレーター（Generator1～9）は、それぞれ固有の「ブースト率」を持ちます。
    - このブースト率の初期値は `1.0` です。
    - ジェネレーターを1つでも所持していると、そのジェネレーターが生産活動を行うたび（毎秒）、対応するブースト率が `gameSettings.baseBoostIncrementPerSecond` (デフォルト値: 0.01) ずつ加算されていきます。（例: `1.00` → `1.01` → `1.02` ...）
    - ジェネレーターの所持数を増やしても、ブースト率自体の毎秒の増加量は上記の値で固定です。
    - プレステージリセットを行うと、全てのジェネレーターのブースト率は初期値の `1.0` に戻ります。

2.  **リセットブースト (`resetBoostRate`):**
    - ゲーム全体にかかる「リセットブースト率」です。
    - このブースト率の初期値は `1.0` です。
    - プレイヤーが「第1臨界点」を達成し、プレステージリセットを行うたびに、このリセットブースト率が `gameSettings.resetBoostIncrement` (デフォルト値: 1.0) ずつ加算されます。（例: 初回リセットで `2.0`、2回目のリセットで `3.0` となります。）
    - この値はゲームのリセット後も維持され、累積していきます。

**最終的な毎秒キャッシュ生産量 =**
`(Generator1の総数) × (全てのジェネレーターの boostRate の積) × (resetBoostRate)`
(例: Generator1を10個所持、全てのジェネレーターの `boostRate` が各1.1、`resetBoostRate` が2.0の場合、毎秒生産量 = `10 * (1.1^9) * 2.0`)

### プレステージシステム（第1臨界点とリセット）
ゲームの進行における重要なマイルストーンとして「第1臨界点」があり、これを達成することで「プレステージリセット」を実行できます。

- **第1臨界点:**
  - 手持ちのキャッシュが `gameSettings.firstGoalCash` (デフォルト値: 2,147,483,647、約21.4億) に達すると、この臨界点を達成したことになります。
  - 達成すると、画面に「First Critical Point Reached!」というメッセージと共に「Reset for +1 Prestige Point」ボタンが表示され、プレステージリセットが可能になります。

- **リセット実行時の影響:**
  - ボタンをクリックすると、以下の変更が行われゲームがリセットされます:
    - **プレステージポイント:** 1ポイント加算されます。このポイントは累積され、将来的なアップグレードに使用できる予定です。
    - **リセットブースト率:** 現在のリセットブースト率に `gameSettings.resetBoostIncrement` (デフォルト値: 1.0) が加算されます。このブースト率も累積され、リセット後のキャッシュ生産を加速させます。
    - **リセットされる項目:**
        - キャッシュ: 0 にリセットされます。
        - ジェネレーターのレベル（購入数・自動生産された数）: 全て0になります。
        - ジェネレーターのコスト: 全て初期コストに戻ります。
        - ジェネレーター別ブースト率 (`boostRate`): 全て初期値の `1.0` にリセットされます。
    - **維持・特殊処理される項目:**
        - **Generator1の初期状態:** リセット後、Generator1は自動的にレベル1（購入数1、総数1）の状態で開始され、そのコストも1回購入後の値に設定されます。
        - 購入回数の選択状態（1x, 10x, MAXなど）: リセット前の状態が維持されます。
        - プレステージポイントとリセットブースト率: 上記の通り加算され、その累積値が維持されます。

- リセット後は、これらの強化要素（特にリセットブースト率）を活用して、より迅速にキャッシュを増やし、さらなる高みを目指すことになります。

## 操作方法
ゲームの主要な操作は以下の通りです。

### ジェネレーターの購入方法
各ジェネレーターは、対応する購入ボタンをクリックすることで購入（またはレベルアップ）できます。

- **購入判断:**
  - ボタンには、選択されている購入数（例: "Buy 1", "Buy MAX"）、購入に必要なコスト、そしてコストが現在の所持キャッシュを上回る場合には購入可能になるまでの推定時間が表示されます。これらの情報は「画面の見方」セクションで詳しく説明されています。
  - 購入に十分なキャッシュがある場合、ボタンはジェネレーターのテーマカラーで明るく表示され、クリック可能です。キャッシュが不足している場合は暗く表示されます。
- **購入実行:**
  - ボタンをクリックすると、現在「購入回数選択」パネルで選ばれている数だけジェネレーターの購入が試みられます。
  - 十分なキャッシュがあれば購入が実行され、ジェネレーターの数が増え、キャッシュが消費されます。コストも次の購入のために増加します。
  - 「MAX」が選択されている場合は、現在のキャッシュで購入可能な最大数が一度に購入されます。

### プレステージの実行方法
- キャッシュが「第1臨界点」の目標額に達すると、「リセットエリア」が表示され、「Reset for +X Prestige Point」といった内容のボタンが出現します（詳細は「画面の見方」セクション参照）。
- このボタンをクリックすることでプレステージリセットが実行され、ゲームがリセットされると同時にプレステージポイントやリセットブーストなどの恩恵を得ることができます。リセット時の具体的な影響については「プレステージシステム」のセクションを参照してください。
```
