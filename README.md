# idleinfinity

## ゲームの遊び方

このゲームは、放置系（アイドル）ゲームです。

### ゲームの目的
1.  **第1臨界点:** まずは、手持ちのキャッシュを **2^31 - 1 (約21.4億)** まで増やし、「第1臨界点」を達成することを目指します。
2.  **プレステージとさらなる高み:** 第1臨界点を達成するとゲームをリセットすることができ、**プレステージポイント**を獲得できます。（将来的に、このポイントを使用して様々な強化が可能になる予定です。）リセット後は、より効率的にキャッシュを増やし、さらなる高みを目指すことになります。究極の目標はキャッシュ `2^32` ですが、まずは第1臨界点からの周回が目標となります。

### ゲームの開始
- ゲームはキャッシュ0、Generator1を1つ所持した状態からスタートします。Generator1が毎秒キャッシュを生み出し、これを元手に他のジェネレーターを増やしていきます。

### キャッシュの増やし方
- **Generator1** は、唯一直接キャッシュを生み出すジェネレーターです。所有している Generator1 の数が多いほど、基本的なキャッシュ生産量が増加します。
- 最終的な毎秒のキャッシュ生産量は、この基本生産量に、後述する各ジェネレーターの「ブースト率」と「リセットブースト率」が全て乗算された値となります。詳細は「ブーストシステム」の項を参照してください。

### Generator の役割
- **Generator2** から **Generator9** までの上位ジェネレーターは、直接キャッシュを生み出しません。
- 代わりに、各上位ジェネレーター (例: GeneratorX) は、1つ下位のジェネレーター (GeneratorX-1) を毎秒自動的に生産します。
  - 例: Generator2 は Generator1 を生産し、Generator3 は Generator2 を生産します。
- この連鎖により、最上位のジェネレーターを強化することで、下位のジェネレーターが指数関数的に増えていき、最終的に Generator1 の数が大幅に増加し、キャッシュ獲得の基盤を強化します。
- また、各ジェネレーターは生産活動を行うことで自身の「ブースト率」を上昇させます（後述）。

### Generator の購入とコスト
- 各ジェネレーターは、対応する購入ボタンからキャッシュを消費して購入（レベルアップ）できます。
- ジェネレーターを1つ購入（レベルアップ）するたびに、そのジェネレーターの次回購入コストが増加します。計画的に購入を進めましょう。

### ブーストシステム (新設)
ゲームには2種類のブーストが存在し、これらが掛け合わされて最終的なキャッシュ生産量を決定します。

1.  **ジェネレーター別ブースト (`boostRate`):**
    - 各ジェネレーター（Generator1～9）は、それぞれ固有の「ブースト率」を持ちます。
    - このブースト率の初期値は `1.0` です。
    - ジェネレーターを1つでも所持していると、そのジェネレーターが生産活動を行うたび（毎秒）、対応するブースト率が `0.001` ずつ加算されていきます。（例: `1.000` → `1.001` → `1.002` ...）
    - ジェネレーターの所持数を増やしても、ブースト率自体の毎秒の増加量は `0.001` で固定です。
    - プレステージリセットを行うと、全てのジェネレーターのブースト率は初期値の `1.0` に戻ります。

2.  **リセットブースト (`resetBoostRate`):**
    - ゲーム全体にかかる「リセットブースト率」です。
    - このブースト率の初期値は `1.0` です。
    - プレイヤーが「第1臨界点」を達成し、プレステージリセットを行うたびに、このリセットブースト率が `1.0` ずつ加算されます。（例: 初回リセットで `2.0`、2回目のリセットで `3.0` となります。）
    - この値はゲームのリセット後も維持され、累積していきます。

**最終的な毎秒キャッシュ生産量 =**
`(Generator1の総数) × (全GeneratorのboostRateの積) × (resetBoostRate)`
(例: Gen1が10個、全GenのboostRateが全て1.1、resetBoostRateが2.0なら、生産量は `10 * (1.1^9) * 2.0`)

### 第1臨界点達成とリセット
- キャッシュが `2^31 - 1` に達すると、「First Critical Point Reached!」という英語のメッセージと共に「Reset for +1 Prestige Point」ボタンが表示されます。
- このボタンをクリックすると、以下のようになります:
    - プレステージポイントが1加算されます。
    - **リセットブースト率が1.0加算されます。**
    - キャッシュは0に、全てのジェネレーターのレベル（購入数・自動生産数）は0に、各ジェネレーターのコストは初期状態にリセットされます。**ただし、Generator1は初期状態でレベル1（購入数1、総数1）となり、そのコストも1回購入後の値に設定されます。**
    - **全てのジェネレーターのブースト率は初期値の1.0にリセットされます。**
    - 購入回数の選択状態はリセットされず、維持されます。
- リセット後、プレステージポイントを元に（将来的には）強化された状態で、再びキャッシュ集めを開始します。

## 操作方法

ゲームの操作は非常にシンプルです。

### オプション設定
- 画面右上に表示される「⚙️」（歯車）アイコンのボタンをクリックすると、オプション設定パネルが画面右端からスライドして表示されます。
- パネルが表示されると、右上のボタンアイコンは「✖️」（バツ）に変わります。この「✖️」ボタンを再度クリックすると、オプションパネルは右端にスライドして格納され、ボタンアイコンも元の「⚙️」に戻ります。
- **数字表記方法の選択:** オプションパネル内で、以下の数値表示形式を選択できます。ゲーム内のすべての数値（キャッシュ、コスト、ブースト率、収入など。ただしジェネレーターレベルは常に整数表示）の表示方法に影響します。
    - **Standard (標準形式):**
        - 絶対値が100未満の数値: 有効数字を考慮し、値の大きさに応じて小数点以下が動的に調整され、不要な末尾のゼロは省略されます (例: `0`, `7`, `1.23`, `-12.3`, `0.123`, `-0.0123`)。
        - 絶対値が100以上10億未満の数値: カンマ区切りの整数として表示されます (例: `346`, `-1,234,567`)。
        - 絶対値が10億以上の数値: "B" (10億), "T" (兆), "Qa" (千兆) といった単位や、さらに大きな数値の場合は指数表記 (例: `1.23e18`) が用いられます。
    - **Scientific (指数表記):**
        - 数値の絶対値が10未満の場合: Standard表記と同様のルールで表示されます (例: `0`, `7`, `1.23`, `-0.456`, `0.0123`)。
        - 数値の絶対値が10以上の場合: 仮数部を小数点以下2桁にした指数形式で表示されます (例: `1.23e1`, `-4.56e2`, `1.00e10`)。指数部の `e+` は `e` に置換されます。
    - **Hexadecimal (16進数表記):**
        - 数値はまず小数点以下を切り捨てて整数に変換された後、16進数文字列に変換されます。読みやすさのため、4桁ごとにスペースが挿入されます (例: `ff`, `3a c4`, `f de1 b2c`)。

### 購入回数の選択
- ... (既存の記述は維持) ...

### 画面の見方
- **キャッシュ表示:** 画面上部（タイトルと全体ブースト表示の間）に現在の所持キャッシュが表示されます。数値の書式はオプション設定に従います。
- **プレステージポイント表示:** 初めてリセットしてプレステージポイントを1以上獲得すると、キャッシュ表示の隣に、現在所持しているプレステージポイントが表示されるようになります。(例: `| Prestige Points: 1`) これ以降は常に表示されます。数値の書式はオプション設定に従います。
- **全体ブースト表示 (新設):** ゲームタイトルと統計情報表示の間に、現在の総合的なキャッシュ生産ブースト倍率が掛け算の形で表示されます。各ジェネレーターのブースト率およびリセットブースト率はそれぞれのテーマカラー（リセットブーストはグレー）で、オプション設定の書式（主にStandardまたはScientificの小数部ルール）に従って表示されます。(例: <span style="color: #FF6B6B; font-weight: bold;">1.23</span> × <span style="color: #FFD166; font-weight: bold;">1.1</span> × ... × <span style="color: grey; font-weight: bold;">2</span>)。また、この表示エリアの2行目には、現在の1秒あたりの収入 (Income: XXX /s) が、オプション設定の書式に従って表示されます。
- **購入回数選択 (Buy Amount Selector):** 統計情報表示のすぐ下、リセットエリアやジェネレーター購入ボタン群の前に配置されています。ここでジェネレーターのまとめ買いの数量（1x, 5x, 10x, 100x, MAX）を選択できます。
- **リセットエリア (条件付き表示):** ... (既存の記述は維持) ...
- **ジェネレーター情報と購入ボタン:**
    - ... (段階的表示、複数列表示の説明は維持) ...
    - 各ブロックの構成は以下の通りです:
        - **左側（情報表示エリア）:**
            - **1行目:** ジェネレーター名 (例: `Generator1`)
            - **2行目:** 現在のレベル。 ... (lv X + Y の説明は維持) ...
        - **右側（購入ボタン）:** ... (既存の3行表示の説明は維持) ...
    - **テーマカラーの適用 (新設):** 各ジェネレーターには固有のテーマカラーが設定されています。この色は、全体ブースト表示内の各ジェネレーターのブースト率や、購入可能なジェネレーターの購入ボタンの背景色に適用され、視覚的な区別を助けます。

### Generator の購入
- ... (既存の記述は維持) ...
```
